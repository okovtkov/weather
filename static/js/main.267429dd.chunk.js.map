{"version":3,"sources":["hooks/dragNdrop.ts","types.ts","components/icon/icon.tsx","components/small-card/small-card.tsx","utils.ts","api/weather.ts","components/big-card/big-card.tsx","components/cards/cardsData.ts","components/cards/cards.tsx","components/input-wrapper/input-wrapper.tsx","components/sort-form/sort-by-name.tsx","components/sort-form/search.tsx","components/sort-form/conditions.ts","components/sort-form/sort-by-weather-condition.tsx","components/sort-form/sort-form.tsx","components/weather-content/weather-content.tsx","components/weather-map/weather-map.tsx","components/icon/icons/marker_blue.png","components/icon/icons/_blue.png","components/weather-map/map-loader.tsx","components/weather-app/weather-app.tsx","index.tsx"],"names":["useDragNDrop","props","useState","favouritesContainer","setFavouritesContainer","startLeft","startTop","startX","startY","mouseDownInfo","setMouseDownInfo","createEmptyCard","useCallback","target","favourite","closest","newEmpty","document","createElement","oldEmpty","querySelector","classList","add","before","after","contains","container","append","remove","addToArray","index","favourites","length","onChangeFavourites","city","splice","deleteFavourite","findIndex","i","id","changeArray","indexCurrentCity","changeFavourite","childrens","children","empty","Array","from","item","type","checkElementFromPoint","e","card","style","visibility","elementFromPoint","clientX","clientY","wheelHandler","scrollTop","deltaY","mouseMoveHandler","draggable","left","top","addEventListener","removeEventListener","deleteActive","clone","mouseUpHandler","event","onChangeDraggable","contextMenuHandler","checkForBugs","presenceOfBugs","mouseDownHandler","obj","cloneNode","y","getBoundingClientRect","x","useEffect","draggableElem","useLayoutEffect","WeatherCondition","Icon","className","classNames","name","SmallCard","useRef","current","temp","useMemo","temperature","weather","ref","utils","translateWindDir","dir","getConditionText","weatherCondition","rainy","PATCHY_RAIN_POSSIBLE","PATCHY_LIGHT_DRIZZLE","LIGHT_DRIZZLE","PATCHY_LIGHT_RAIN","LIGHT_RAIN","MODERATE_RAIN_AT_TIMES","MODERATE_RAIN","HEAVY_RAIN_AT_TIMES","HEAVY_RAIN","LIGHT_FREEZING_RAIN","MODERATE_OR_HEAVY_FREEZING_RAIN","LIGHT_RAIN_SHOWER","MODERATE_OR_HEAVY_RAIN_SHOWER","TORRENTIAL_RAIN_SHOWER","LIGHT_SLEET_SHOWERS","MODERATE_OR_HEAVY_SLEET_SHOWERS","PATCHY_LIGHT_RAIN_WITH_THUNDER","MODERATE_OR_HEAVY_RAIN_WITH_THUNDER","sunny","SUNNY","cloudy","PARTLY_CLOUDY","CLOUDY","OVERCAST","snowy","PATCHY_SLEET_POSSIBLE","BLOWING_SNOW","LIGHT_SLEET","MODERATE_OR_HEAVY_SLEET","PATCHY_LIGHT_SNOW","LIGHT_SNOW","PATCHY_MODERATE_SNOW","MODERATE_SNOW","PATCHY_HEAVY_SNOW","HEAVY_SNOW","ICE_PELLETS","LIGHT_SNOW_SHOWERS","MODERATE_OR_HEAVY_SNOW_SHOWERS","PATCHY_LIGHT_SNOW_WITH_THUNDER","MODERATE_OR_HEAVY_SNOW_WITH_THUNDER","blizzard","BLIZZARD","includes","weatherApi","cities","options","now","Date","cachedAt","localStorage","getItem","Number","timeDiff","cacheMs","localWeather","Error","Promise","resolve","JSON","parse","all","map","cityWeather","then","resp","setItem","toString","stringify","cachedWeather","weatherParse","fetch","process","lat","lon","response","json","speed","wind_kph","windDir","wind_dir","temp_c","condition","code","wind","BigCard","removeWantedCityHandler","onWantSelectCity","changeWantedCityHandler","changeSelectedCityHandler","onChangeSelectedCity","selectedCity","desiredCity","onMouseEnter","onMouseLeave","onClick","toFixed","mockCities","Cards","setDraggable","weatherData","setWeatherData","changeFavouritesHandler","ascCompare","a","b","descCompare","compare","sortType","sort","favouritesData","find","old","newWeather","concat","conditions","InputWrapper","value","defaultChecked","checked","onChange","placeholder","htmlFor","label","iconName","SortByName","changeHandler","invertedType","onChangeSortType","Search","onChangeQuery","query","desc","SortByWeatherCondition","changeConditionQueryHandler","Set","has","delete","onChangeCondition","SortForm","action","method","searchQuery","onChangeSearchQuery","WeatherContent","setSortType","setSearchQuery","setCondition","filteredCities","filter","toLowerCase","WeatherMap","setMarkers","newMarkers","marker","google","maps","Marker","position","lng","addListener","setIcon","forEach","setMap","setCenter","panBy","MapLoader","Loader","apiKey","version","load","Map","getElementById","center","zoom","WeatherApp","cards","setFavourites","setSelectedCity","setDesiredCity","newFavouriteArray","ReactDOM","render"],"mappings":"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","file":"static/js/main.267429dd.chunk.js","sourcesContent":["/* eslint-disable prettier/prettier */\nimport { useCallback, useEffect, useLayoutEffect, useState } from 'react';\nimport { City } from '../types';\n\ntype cardType = 'big-card' | 'small-card';\n\ninterface Props {\n  city: City;\n  favourites: City[];\n  onChangeFavourites: (cities: City[]) => void;\n  card: HTMLElement | null;\n  draggable: HTMLElement | null;\n  onChangeDraggable: (param: HTMLElement | null) => void;\n  type: cardType;\n}\n\ninterface MouseDownInfo {\n  startLeft: number;\n  startTop: number;\n  startX: number;\n  startY: number;\n}\n\nexport default function useDragNDrop(props: Props) {\n  const [favouritesContainer, setFavouritesContainer] =\n    useState<HTMLElement | null>(null);\n  const [mouseDownInfo, setMouseDownInfo] = useState<MouseDownInfo>({\n    startLeft: 0,\n    startTop: 0,\n    startX: 0,\n    startY: 0,\n  });\n\n  const createEmptyCard = useCallback((target) => {\n    if (!target) return;\n    const favourite = target.closest('.big-card');\n    const newEmpty = document.createElement('div');\n    const oldEmpty = document.querySelector('.big-card--empty');\n    newEmpty.classList.add('big-card--empty');\n\n    if (target.closest('.big-card__header')) favourite.before(newEmpty);\n    if (target.closest('.big-card__content')) favourite.after(newEmpty);\n    if (target.classList.contains('big-card--empty')) return;\n    if (\n      target.classList.contains('cards__big-cards') ||\n      target.classList.contains('cards__help')\n    ) {\n      const container = document.querySelector('.cards__big-cards');\n      container?.append(newEmpty);\n    }\n\n    if (oldEmpty) oldEmpty.remove();\n  }, []);\n\n  const addToArray = useCallback(\n    (index) => {\n      if (props.favourites?.length === 0) {\n        props.onChangeFavourites([props.city]);\n      } else {\n        const favourites = [...props.favourites];\n        favourites.splice(index, 0, props.city);\n        props.onChangeFavourites(favourites);\n      }\n    },\n    [props]\n  );\n\n  const deleteFavourite = useCallback(() => {\n    const { favourites } = props;\n    const index = favourites.findIndex((i) => i.id === props.city.id);\n    favourites.splice(index, 1);\n    props.onChangeFavourites(favourites);\n  }, [props]);\n\n  const changeArray = useCallback(\n    (index) => {\n      const favourites = [...props.favourites];\n      const indexCurrentCity = favourites.findIndex(\n        (i) => i.id === props.city.id\n      );\n      const i =\n        indexCurrentCity > index ? indexCurrentCity + 1 : indexCurrentCity;\n      favourites.splice(index, 0, props.city);\n      favourites.splice(i, 1);\n      props.onChangeFavourites(favourites);\n    },\n    [props]\n  );\n\n  const changeFavourite = useCallback(() => {\n    const childrens = document.querySelector('.cards__big-cards')?.children;\n    const empty = document.querySelector('.big-card--empty');\n    if (!childrens) return;\n    const cards = Array.from(childrens);\n    const index = cards.findIndex((item) =>\n      item.classList.contains('big-card--empty')\n    );\n\n    if (!empty) return;\n    if (props.type === 'small-card') addToArray(index);\n    else changeArray(index);\n    empty?.remove();\n  }, [addToArray, changeArray, props.type]);\n\n  const checkElementFromPoint = useCallback((e) => {\n    const { card } = props;\n    if (!card) return null;\n    card.style.visibility = 'hidden';\n    const target = document.elementFromPoint(e.clientX, e.clientY) as HTMLElement;\n    card.style.visibility = 'visible';\n    return target;\n  }, [props]);\n\n  const wheelHandler = useCallback((e) => {\n    const container = document.querySelector('.cards__big-cards');\n    if (!container) return;\n    container.scrollTop += e.deltaY;\n  }, []);\n\n  const mouseMoveHandler = useCallback(\n    (e) => {\n      const { card } = props;\n      if (!card || card !== props.draggable || !favouritesContainer) return;\n\n      card.style.left = `${mouseDownInfo.startLeft + (e.clientX - mouseDownInfo.startX)}px`;\n      card.style.top = `${mouseDownInfo.startTop + (e.clientY - mouseDownInfo.startY)}px`;\n      const target = checkElementFromPoint(e);\n      if (target?.closest('.cards__big-cards')) {\n        document.addEventListener('wheel', wheelHandler);\n      } else {\n        document.removeEventListener('wheel', wheelHandler);\n      }\n      createEmptyCard(target);\n    },\n    [\n      props,\n      favouritesContainer,\n      mouseDownInfo.startLeft,\n      mouseDownInfo.startX,\n      mouseDownInfo.startTop,\n      mouseDownInfo.startY,\n      checkElementFromPoint,\n      createEmptyCard,\n      wheelHandler\n    ]\n  );\n\n  const deleteActive = useCallback(\n    () => {\n      const clone = document.querySelector('.small-card_active');\n      clone?.remove();\n  }, []);\n\n  const mouseUpHandler = useCallback(\n    (event) => {\n      deleteActive();\n      const draggable = props.card;\n      if (!draggable) return;\n\n      draggable.classList.remove(`${props.type}_draggable`);\n      draggable.style.top = `${mouseDownInfo.startTop}px`;\n      draggable.style.left = `${mouseDownInfo.startLeft}px`;\n      changeFavourite();\n      props.onChangeDraggable(null);\n      document.removeEventListener('wheel', wheelHandler);\n\n      if (props.type === 'small-card') return;\n      const target = checkElementFromPoint(event);\n      if (!target) return;\n      if (target.closest('.cards__small-cards')) deleteFavourite();\n    },\n    [\n      changeFavourite,\n      checkElementFromPoint,\n      deleteActive,\n      deleteFavourite,\n      mouseDownInfo.startLeft,\n      mouseDownInfo.startTop,\n      props,\n      wheelHandler\n    ]\n  );\n\n  const contextMenuHandler = useCallback((event) => {\n    mouseUpHandler(event);\n    document.removeEventListener('contextmenu', contextMenuHandler);\n  }, [mouseUpHandler]);\n\n  const checkForBugs = useCallback((event) => {\n    let presenceOfBugs = false;\n    document.addEventListener('contextmenu', contextMenuHandler);\n    const isDraggableElem = event.target.closest('.small-card_draggable')\n      || event.target.closest('.big-card_draggable');\n    if (isDraggableElem) {\n      mouseUpHandler(event);\n      presenceOfBugs = true;\n    }\n    return presenceOfBugs;\n  }, [contextMenuHandler, mouseUpHandler]);\n\n  const mouseDownHandler = useCallback(\n    (event) => {\n      deleteActive();\n      if (checkForBugs(event)) return;\n      const obj = props.card;\n      if (!favouritesContainer || !obj) return;\n\n      if (props.type === 'small-card') {\n        const clone = obj.cloneNode(true) as HTMLElement;\n        obj.after(clone);\n        clone.classList.add(`${props.type}_active`);\n      }\n\n      const y = obj.getBoundingClientRect().top;\n      const x = obj.getBoundingClientRect().left;\n      obj.classList.add(`${props.type}_draggable`);\n      obj.style.top = `${y}px`;\n      obj.style.left = `${x}px`;\n\n      if (props.type === 'big-card') {\n        const target = checkElementFromPoint(event);\n        createEmptyCard(target);\n      }\n\n      setMouseDownInfo({\n        startLeft: obj.getBoundingClientRect().left,\n        startTop: obj.getBoundingClientRect().top,\n        startX: event.clientX,\n        startY: event.clientY,\n      });\n      props.onChangeDraggable(obj);\n    },\n    [checkElementFromPoint, checkForBugs, createEmptyCard, deleteActive, favouritesContainer, props]\n  );\n\n  useEffect(() => {\n    const { card } = props;\n    const draggableElem = props.type === 'big-card' ? card?.querySelector('.big-card__header') : card;\n    draggableElem?.addEventListener('mousedown', mouseDownHandler);\n    draggableElem?.addEventListener('mouseup', mouseUpHandler);\n    if (props.draggable === props.card)\n      document.addEventListener('mousemove', mouseMoveHandler);\n\n    return () => {\n      draggableElem?.removeEventListener('mousedown', mouseDownHandler);\n      draggableElem?.removeEventListener('mouseup', mouseUpHandler);\n      document.removeEventListener('mousemove', mouseMoveHandler);\n    };\n  }, [contextMenuHandler, mouseDownHandler, mouseMoveHandler, mouseUpHandler, props, wheelHandler]);\n\n  useLayoutEffect(() => {\n    const container = document.querySelector('.cards__big-cards') as HTMLElement;\n    setFavouritesContainer(container);\n  }, []);\n}\n","export interface City {\n  name: string;\n  id: string;\n  lat: number;\n  lon: number;\n}\n\nexport type SortType = 'asc' | 'desc';\n\nexport interface Coord {\n  lat: number;\n  lng: number;\n}\n\nexport enum WeatherCondition {\n  SUNNY = 1000, // солнечно\n  PARTLY_CLOUDY = 1003, // частично облачно\n  CLOUDY = 1006, // облачно\n  OVERCAST = 1009, // пасмурно\n  MIST = 1030, // туманно\n  PATCHY_RAIN_POSSIBLE = 1063, // возможен местами дождь\n  PATCHY_SNOW_POSSIBLE = 1066, // возможен местами снежок\n  PATCHY_SLEET_POSSIBLE = 1069, // возможен местами мокрый снег\n  PATCHY_FREEZING_DRIZZLE_POSSIBLE = 1072, // возможна местами слабая морось\n  THUNDERY_OUTBREAKS_POSSIBLE = 1087, // возможен гром\n  BLOWING_SNOW = 1114, // низовая метель\n  BLIZZARD = 1117, // метель\n  FOG = 1135, // туман\n  FREEZING_FOG = 1147, // ледяной туман\n  PATCHY_LIGHT_DRIZZLE = 1150, // местами моросящий дождь\n  LIGHT_DRIZZLE = 1153, // моросящий дождь\n  FREEZING_DRIZZLE = 1168, // изморозь\n  HEAVY_FREEZING_DRIZZLE = 1171, // сильная переохлажденная морось\n  PATCHY_LIGHT_RAIN = 1180, // местами небольшой дождь\n  LIGHT_RAIN = 1183, // небольшой дождь\n  MODERATE_RAIN_AT_TIMES = 1186, // умеренный дождь время от времени\n  MODERATE_RAIN = 1189, // умеренный дождь\n  HEAVY_RAIN_AT_TIMES = 1192, // сильный дождь время от времени\n  HEAVY_RAIN = 1195, // сильный дождь\n  LIGHT_FREEZING_RAIN = 1198, // легкий ледяной дождь\n  MODERATE_OR_HEAVY_FREEZING_RAIN = 1201, // умеренный или сильный ледяной дождь\n  LIGHT_SLEET = 1204, // легкий мокрый снег\n  MODERATE_OR_HEAVY_SLEET = 1207, // умеренный или сильный мокрый снег\n  PATCHY_LIGHT_SNOW = 1210, // местами легкий снег\n  LIGHT_SNOW = 1213, // легкий снег\n  PATCHY_MODERATE_SNOW = 1216, // местами умеренный снег\n  MODERATE_SNOW = 1219, // умеренный снег\n  PATCHY_HEAVY_SNOW = 1222, // местами сильный снег\n  HEAVY_SNOW = 1225, // сильный снег\n  ICE_PELLETS = 1237, // ледяная крупа\n  LIGHT_RAIN_SHOWER = 1240, // небольшой ливень\n  MODERATE_OR_HEAVY_RAIN_SHOWER = 1243, // умеренный или сильный ливневый дождь\n  TORRENTIAL_RAIN_SHOWER = 1246, // проливной дождь\n  LIGHT_SLEET_SHOWERS = 1249, // небольшой дождь с мокрым снегом\n  MODERATE_OR_HEAVY_SLEET_SHOWERS = 1252, // умеренный или сильный мокрый снег + дождь\n  LIGHT_SNOW_SHOWERS = 1255, // небольшой снегопад\n  MODERATE_OR_HEAVY_SNOW_SHOWERS = 1258, // умеренный или сильный снегопад\n  LIGHT_SHOWERS_OF_ICE_PELLETS = 1261, // легкий ливень ледяной крупы\n  MODERATE_OR_HEAVY_SHOWERS_OF_ICE_PELLETS = 1264, // умеренный или сильный ливень ледяной крупы\n  PATCHY_LIGHT_RAIN_WITH_THUNDER = 1273, // местами легкий дождь с громом\n  MODERATE_OR_HEAVY_RAIN_WITH_THUNDER = 1276, // умеренный или сильный дождь с громом\n  PATCHY_LIGHT_SNOW_WITH_THUNDER = 1279, // местами легкий снег с громом\n  MODERATE_OR_HEAVY_SNOW_WITH_THUNDER = 1282, // умеренный или сильный снег с громом\n}\n\nexport interface Weather {\n  name: string;\n  id: string;\n  temp: number;\n  condition: WeatherCondition;\n  wind: number;\n  windDir: string;\n}\n","/* eslint-disable jsx-a11y/no-static-element-interactions */\nimport classNames from 'classnames';\nimport './icon.scss';\n\ninterface Props {\n  name: string;\n}\n\nconst Icon = (props: Props) => {\n  return <span className={classNames('icon', `icon--${props.name}`)} />;\n};\n\nexport default Icon;\n","import { useMemo, useRef } from 'react';\nimport classNames from 'classnames';\nimport useDragNDrop from '../../hooks/dragNdrop';\nimport Icon from '../icon/icon';\nimport './small-card.scss';\nimport { City, Weather } from '../../types';\n\ninterface Props {\n  city: City;\n  draggable: HTMLElement | null;\n  onChangeDraggable: (param: HTMLElement | null) => void;\n  favourites: City[];\n  weather?: Weather;\n  onChangeFavourites: (cities: City[]) => void;\n}\n\nconst SmallCard = (props: Props) => {\n  const card = useRef<HTMLDivElement>(null);\n  useDragNDrop({\n    draggable: props.draggable,\n    onChangeDraggable: props.onChangeDraggable,\n    city: props.city,\n    favourites: props.favourites,\n    onChangeFavourites: props.onChangeFavourites,\n    card: card.current,\n    type: 'small-card',\n  });\n\n  const temp = useMemo(() => {\n    const temperature = props.weather?.temp;\n    return temperature && temperature > 0 ? `+${temperature}` : temperature;\n  }, [props.weather]);\n\n  return (\n    <div\n      className={classNames('small-card', {\n        'small-card_draggable': props.draggable === card.current,\n      })}\n      ref={card}\n    >\n      <span className=\"small-card__city\">{props.city.name}</span>\n      <span className=\"small-card__temperature\">{temp}°</span>\n      <Icon name=\"strips-small\" />\n    </div>\n  );\n};\n\nexport default SmallCard;\n","/* eslint-disable prettier/prettier */\nimport { WeatherCondition } from './types';\n\nconst utils = {\n  translateWindDir(dir: string) {\n    switch (dir) {\n      case 'N': return 'С';\n      case 'NNE': return 'С-СВ';\n      case 'NE': return 'СВ';\n      case 'ENE': return 'В-СВ';\n      case 'E': return 'В';\n      case 'ESE': return 'В-ЮВ';\n      case 'SE': return 'ЮВ';\n      case 'SSE': return 'Ю-ЮВ';\n      case 'S': return 'Ю';\n      case 'SSW': return 'Ю-ЮЗ';\n      case 'SW': return 'ЮЗ';\n      case 'WSW': return 'З-ЮЗ';\n      case 'W': return 'З';\n      case 'WNW': return 'З-СЗ';\n      case 'NW': return 'СЗ';\n      case 'NNW': return 'С-СЗ';\n      default: return '';\n    }\n  },\n\n  getConditionText(weatherCondition: WeatherCondition) {\n    const rainy = [\n      WeatherCondition.PATCHY_RAIN_POSSIBLE,\n      WeatherCondition.PATCHY_LIGHT_DRIZZLE,\n      WeatherCondition.LIGHT_DRIZZLE,\n      WeatherCondition.PATCHY_LIGHT_RAIN,\n      WeatherCondition.LIGHT_RAIN,\n      WeatherCondition.MODERATE_RAIN_AT_TIMES,\n      WeatherCondition.MODERATE_RAIN,\n      WeatherCondition.HEAVY_RAIN_AT_TIMES,\n      WeatherCondition.HEAVY_RAIN,\n      WeatherCondition.LIGHT_FREEZING_RAIN,\n      WeatherCondition.MODERATE_OR_HEAVY_FREEZING_RAIN,\n      WeatherCondition.LIGHT_RAIN_SHOWER,\n      WeatherCondition.MODERATE_OR_HEAVY_RAIN_SHOWER,\n      WeatherCondition.TORRENTIAL_RAIN_SHOWER,\n      WeatherCondition.LIGHT_SLEET_SHOWERS,\n      WeatherCondition.MODERATE_OR_HEAVY_SLEET_SHOWERS,\n      WeatherCondition.PATCHY_LIGHT_RAIN_WITH_THUNDER,\n      WeatherCondition.MODERATE_OR_HEAVY_RAIN_WITH_THUNDER,\n    ];\n    const sunny = [WeatherCondition.SUNNY];\n    const cloudy = [\n      WeatherCondition.PARTLY_CLOUDY,\n      WeatherCondition.CLOUDY,\n      WeatherCondition.OVERCAST,\n    ];\n    const snowy = [\n      WeatherCondition.PATCHY_SLEET_POSSIBLE,\n      WeatherCondition.BLOWING_SNOW,\n      WeatherCondition.LIGHT_SLEET,\n      WeatherCondition.MODERATE_OR_HEAVY_SLEET,\n      WeatherCondition.PATCHY_LIGHT_SNOW,\n      WeatherCondition.LIGHT_SNOW,\n      WeatherCondition.PATCHY_MODERATE_SNOW,\n      WeatherCondition.MODERATE_SNOW,\n      WeatherCondition.PATCHY_HEAVY_SNOW,\n      WeatherCondition.HEAVY_SNOW,\n      WeatherCondition.ICE_PELLETS,\n      WeatherCondition.LIGHT_SNOW_SHOWERS,\n      WeatherCondition.MODERATE_OR_HEAVY_SNOW_SHOWERS,\n      WeatherCondition.PATCHY_LIGHT_SNOW_WITH_THUNDER,\n      WeatherCondition.MODERATE_OR_HEAVY_SNOW_WITH_THUNDER,\n    ];\n    const blizzard = [WeatherCondition.BLIZZARD];\n  \n    if (rainy.includes(weatherCondition)) return 'rainy';\n    if (sunny.includes(weatherCondition)) return 'sunny';\n    if (cloudy.includes(weatherCondition)) return 'cloudy';\n    if (snowy.includes(weatherCondition)) return 'snowy';\n    if (blizzard.includes(weatherCondition)) return 'blizzard';\n    return 'none';\n  }\n}\n\nexport default utils;\n","import { City, Weather } from '../types';\nimport utils from '../utils';\n\ninterface WeatherGetterOptions {\n  // кол-во мс которые кэш будет хранить ответ\n  cacheMs: number;\n}\n\nconst weatherApi = {\n  current(cities: City[], options?: WeatherGetterOptions): Promise<Weather[]> {\n    const now = Date.now();\n    const cachedAt = localStorage.getItem('date')\n      ? Number(localStorage.getItem('date'))\n      : 0;\n    const timeDiff = now - cachedAt;\n    if (options?.cacheMs && timeDiff < options?.cacheMs) {\n      const localWeather = localStorage.getItem('weather');\n      if (!localWeather) throw new Error('Что-то не то');\n      return Promise.resolve(JSON.parse(localWeather));\n    }\n\n    // в случае с избранными, получать погоду при каждой загрузке\n    if (!options?.cacheMs) {\n      return Promise.all(\n        cities.map((city) => this.cityWeather(city).then((resp) => resp))\n      ).then((resp) => {\n        const cachedWeather = localStorage.getItem('weather')\n          ? localStorage.getItem('weather')\n          : null;\n        if (cachedWeather) {\n          const weatherParse = JSON.parse(cachedWeather);\n          const weather = [...weatherParse, ...resp];\n          localStorage.setItem('weather', JSON.stringify(weather));\n        }\n        return resp;\n      });\n    }\n\n    return Promise.all(cities.map((city) => this.cityWeather(city))).then(\n      (resp) => {\n        localStorage.setItem('date', now.toString());\n        localStorage.setItem('weather', JSON.stringify(resp));\n        return resp;\n      }\n    );\n  },\n\n  cityWeather(city: City) {\n    return fetch(\n      `https://api.weatherapi.com/v1/current.json?key=${process.env.REACT_APP_WEATHER_KEY}&q=${city.lat},${city.lon}`\n    )\n      .then((response) => response.json())\n      .then((response) => {\n        const speed = (response.current.wind_kph * 1000) / 3600;\n        const windDir = utils.translateWindDir(response.current.wind_dir);\n\n        const item: Weather = {\n          name: city.name,\n          id: city.id,\n          temp: response.current.temp_c,\n          condition: response.current.condition.code,\n          wind: speed,\n          windDir,\n        };\n        return item;\n      });\n  },\n};\n\nexport default weatherApi;\n","/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable jsx-a11y/mouse-events-have-key-events */\nimport { useCallback, useMemo, useRef } from 'react';\nimport classNames from 'classnames';\nimport Icon from '../icon/icon';\nimport { City, Weather } from '../../types';\nimport utils from '../../utils';\nimport './big-card.scss';\nimport useDragNDrop from '../../hooks/dragNdrop';\n\ninterface Props {\n  city: City;\n  weather?: Weather;\n  favourites: City[];\n  selectedCity: City | null;\n  desiredCity: City | null;\n  draggable: HTMLElement | null;\n  onChangeFavourites: (params: City[]) => void;\n  onChangeSelectedCity: (city: City | null) => void;\n  onWantSelectCity: (city: City | null) => void;\n  onChangeDraggable: (param: HTMLElement | null) => void;\n}\n\nconst BigCard = (props: Props) => {\n  const card = useRef(null);\n  useDragNDrop({\n    draggable: props.draggable,\n    onChangeDraggable: props.onChangeDraggable,\n    onChangeFavourites: props.onChangeFavourites,\n    city: props.city,\n    card: card.current,\n    favourites: props.favourites,\n    type: 'big-card',\n  });\n\n  const removeWantedCityHandler = useCallback(() => {\n    props.onWantSelectCity(null);\n  }, [props]);\n\n  const changeWantedCityHandler = useCallback(() => {\n    props.onWantSelectCity(props.city);\n  }, [props]);\n\n  const changeSelectedCityHandler = useCallback(() => {\n    props.onChangeSelectedCity(props.city);\n  }, [props]);\n\n  const temp = useMemo(() => {\n    const temperature = props.weather?.temp;\n    return temperature && temperature > 0 ? `+${temperature}` : temperature;\n  }, [props.weather?.temp]);\n\n  return (\n    <div\n      ref={card}\n      className={classNames('big-card', {\n        'big-card_selected': props.selectedCity?.id === props.city.id,\n        'big-card_desired': props.desiredCity?.id === props.city.id,\n        'big-card_draggable':\n          props.draggable === card.current && props.draggable !== null,\n      })}\n      onMouseEnter={changeWantedCityHandler}\n      onMouseLeave={removeWantedCityHandler}\n      onClick={changeSelectedCityHandler}\n    >\n      <div className=\"big-card__header\">\n        <span className=\"icon icon--strips-big\" />\n        <span className=\"big-card__city\">{props.city.name}</span>\n      </div>\n      <div className=\"big-card__content\">\n        <div className=\"big-card__content-wrapper\">\n          <div className=\"big-card__weather-conditions\">\n            {props.weather && (\n              <Icon name={utils.getConditionText(props.weather?.condition)} />\n            )}\n          </div>\n          {props.weather?.windDir && (\n            <div className=\"big-card__wind\">\n              <span className=\"icon icon--wind\" />\n              <span className=\"big-card__info\">\n                Ветер {props.weather.windDir},{' '}\n                {props.weather.wind % 1 === 0\n                  ? props.weather.wind\n                  : Number(props.weather.wind.toFixed(1))}{' '}\n                м/с\n              </span>\n            </div>\n          )}\n        </div>\n        <span className=\"big-card__temperature\">{temp}°</span>\n      </div>\n    </div>\n  );\n};\n\nexport default BigCard;\n","import { City } from '../../types';\n\nconst mockCities: City[] = [\n  {\n    name: 'Москва',\n    id: '1',\n    lat: 55.76319879044565,\n    lon: 37.589805265771865,\n  },\n  {\n    name: 'Санкт-Петербург',\n    id: '2',\n    lat: 59.97665957310762,\n    lon: 30.42978408718145,\n  },\n  {\n    name: 'Киев',\n    id: '3',\n    lat: 50.472765961596984,\n    lon: 30.54041837637176,\n  },\n  {\n    name: 'Минск',\n    id: '4',\n    lat: 54.000574708273724,\n    lon: 27.843248508740455,\n  },\n  {\n    name: 'Вильнюс',\n    id: '5',\n    lat: 54.881373316788945,\n    lon: 25.23097465358437,\n  },\n  {\n    name: 'Варшава',\n    id: '6',\n    lat: 52.22478752780553,\n    lon: 20.97054950114021,\n  },\n  {\n    name: 'Вена',\n    id: '7',\n    lat: 48.39325606587112,\n    lon: 16.43859266424972,\n  },\n  {\n    name: 'Рим',\n    id: '8',\n    lat: 41.884810112266834,\n    lon: 12.63653521239818,\n  },\n  {\n    name: 'София',\n    id: '9',\n    lat: 42.616071327067154,\n    lon: 23.277818771680113,\n  },\n  {\n    name: 'Париж',\n    id: '10',\n    lat: 48.89302302108258,\n    lon: 2.2298207473739624,\n  },\n  {\n    name: 'Анкара',\n    id: '11',\n    lat: 39.844293562280036,\n    lon: 32.64463427492055,\n  },\n  {\n    name: 'Мадрид',\n    id: '12',\n    lat: 40.81859690239377,\n    lon: -3.7360928242716325,\n  },\n  {\n    name: 'Осло',\n    id: '13',\n    lat: 60.242004455108415,\n    lon: 11.014613802728068,\n  },\n  {\n    name: 'Берлин',\n    id: '14',\n    lat: 52.85420357145985,\n    lon: 13.391938319194505,\n  },\n  {\n    name: 'Прага',\n    id: '15',\n    lat: 50.22744331088483,\n    lon: 14.420600333352798,\n  },\n  {\n    name: 'Таллин',\n    id: '16',\n    lat: 59.60307084121461,\n    lon: 24.908323337417723,\n  },\n  {\n    name: 'Хельсинки',\n    id: '17',\n    lat: 60.507105953000675,\n    lon: 25.15710408929567,\n  },\n];\n\nexport default mockCities;\n","import { useMemo, useCallback, useEffect, useState } from 'react';\nimport SmallCard from '../small-card/small-card';\nimport { City, SortType, Weather } from '../../types';\nimport weatherApi from '../../api/weather';\nimport './cards.scss';\nimport '../weather-content/weather-content.scss';\nimport BigCard from '../big-card/big-card';\nimport utils from '../../utils';\nimport mockCities from './cardsData';\n\ninterface Props {\n  selectedCity: City | null;\n  desiredCity: City | null;\n  sortType: SortType;\n  favourites: City[];\n  cities: City[];\n  conditions: string[];\n  onChangeFavourites: (cities: City[]) => void;\n  onChangeSelectedCity: (city: City | null) => void;\n  onWantSelectCity: (city: City | null) => void;\n}\n\ninterface FavouritesData {\n  city: City;\n  weather: Weather;\n  condition: string;\n}\n\nconst Cards = (props: Props) => {\n  const [draggable, setDraggable] = useState<HTMLElement | null>(null);\n  const [weatherData, setWeatherData] = useState<Weather[]>([]);\n\n  const changeFavouritesHandler = useCallback(\n    (cities: City[]) => {\n      props.onChangeFavourites([...cities]);\n    },\n    [props]\n  );\n\n  const ascCompare = useCallback((a: City, b: City) => {\n    if (a.name > b.name) return 1;\n    if (a.name < b.name) return -1;\n    return 0;\n  }, []);\n\n  const descCompare = useCallback((a: City, b: City) => {\n    if (a.name > b.name) return -1;\n    if (a.name < b.name) return 1;\n    return 0;\n  }, []);\n\n  const cities = useMemo((): City[] => {\n    const compare = props.sortType === 'asc' ? ascCompare : descCompare;\n    return props.cities.sort(compare);\n  }, [ascCompare, descCompare, props.cities, props.sortType]);\n\n  const favouritesData = useMemo((): FavouritesData[] => {\n    if (weatherData.length < props.cities.length + 1) return [];\n    return props.favourites.map((city) => {\n      const weather = weatherData.find((item) => item.id === city.id);\n      if (!weather) throw new Error('что-то не то');\n\n      const condition = utils.getConditionText(weather.condition);\n      return { city, weather, condition };\n    });\n  }, [props.cities.length, props.favourites, weatherData]);\n\n  useEffect(() => {\n    const time = 1000 * 3600;\n\n    weatherApi.current(cities, { cacheMs: time }).then((weather) => {\n      setWeatherData((old) => {\n        if (old.length === 0) return weather;\n        if (old.length === mockCities.length) {\n          return old.map((item) => {\n            const newWeather = weather.find((i) => i.id === item.id);\n            if (newWeather) return newWeather;\n            return item;\n          });\n        }\n        return old.concat(weather);\n      });\n    });\n\n    weatherApi.current(props.favourites).then((weather) => {\n      setWeatherData((old) => {\n        if (old.length === 0) return weather;\n        if (old.length === mockCities.length) {\n          return old.map((item) => {\n            const newWeather = weather.find((i) => i.id === item.id);\n            if (newWeather) return newWeather;\n            return item;\n          });\n        }\n        return old.concat(weather);\n      });\n    });\n  }, [cities, props.favourites]);\n\n  return (\n    <section className=\"cards\">\n      <h2 className=\"visually-hidden\">Результаты сортировки</h2>\n      <div className=\"cards__small-cards\">\n        {cities.map((city: City) => (\n          <SmallCard\n            draggable={draggable}\n            onChangeDraggable={setDraggable}\n            city={city}\n            weather={weatherData.find((item) => city.id === item.id)}\n            favourites={props.favourites}\n            key={city.id}\n            onChangeFavourites={changeFavouritesHandler}\n          />\n        ))}\n      </div>\n      <div className=\"cards__big-cards\">\n        {favouritesData?.map(\n          (item) =>\n            (props.conditions.includes(item.condition) ||\n              props.conditions.length === 0) && (\n              <BigCard\n                city={item.city}\n                favourites={props.favourites}\n                draggable={draggable}\n                onChangeDraggable={setDraggable}\n                weather={item.weather}\n                key={item.city.id}\n                onChangeFavourites={changeFavouritesHandler}\n                onChangeSelectedCity={props.onChangeSelectedCity}\n                onWantSelectCity={props.onWantSelectCity}\n                selectedCity={props.selectedCity}\n                desiredCity={props.desiredCity}\n              />\n            )\n        )}\n        <div className=\"cards__help\">\n          Перетащите сюда города, погода в которых вам интересна\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default Cards;\n","import classNames from 'classnames';\nimport { ChangeEvent } from 'react';\nimport Icon from '../icon/icon';\nimport './input-wrapper.scss';\n\ninterface Props {\n  className: string;\n  type: 'checkbox' | 'radio' | 'search';\n  name: string;\n  value: string;\n  id: string;\n  label: string;\n  iconName?: string;\n  checked?: boolean;\n  placeholder?: string;\n  onChange?: (event: ChangeEvent<HTMLInputElement>) => void;\n}\n\nconst InputWrapper = (props: Props) => {\n  return (\n    <div\n      className={classNames(props.className, 'input-wrapper', {\n        'input-wrapper--radio': props.type === 'radio',\n        'input-wrapper--checkbox': props.type === 'checkbox',\n        'input-wrapper--search': props.type === 'search',\n      })}\n    >\n      <input\n        id={props.id}\n        type={props.type}\n        name={props.name}\n        value={props.value}\n        defaultChecked={props.checked}\n        onChange={props.onChange}\n        placeholder={props.placeholder}\n      />\n      <label htmlFor={props.id} aria-label={props.label}>\n        {props.iconName && <Icon name={props.iconName} />}\n      </label>\n    </div>\n  );\n};\n\nexport default InputWrapper;\n","import { useCallback } from 'react';\nimport { SortType } from '../../types';\nimport InputWrapper from '../input-wrapper/input-wrapper';\nimport './sort-form.scss';\n\ninterface Props {\n  sortType: SortType;\n  onChangeSortType: (param: SortType) => void;\n}\n\nconst SortByName = (props: Props) => {\n  const changeHandler = useCallback(() => {\n    const invertedType = props.sortType === 'asc' ? 'desc' : 'asc';\n    props.onChangeSortType(invertedType);\n  }, [props]);\n\n  return (\n    <div className=\"sort-form__group\">\n      <InputWrapper\n        className=\"sort-form__input-wrapper\"\n        type=\"radio\"\n        id=\"alphabet-sort\"\n        name=\"alphabet-sort\"\n        value=\"alphabet-sort\"\n        label=\"Сортировка по алфавиту\"\n        iconName=\"arrow-down\"\n        onChange={changeHandler}\n        checked\n      />\n      <InputWrapper\n        className=\"sort-form__input-wrapper\"\n        type=\"radio\"\n        id=\"alphabet-sort-reverse\"\n        name=\"alphabet-sort\"\n        value=\"alphabet-sort-reverse\"\n        label=\"Сортировка по алфавиту в обратном направлении\"\n        iconName=\"arrow-up\"\n        onChange={changeHandler}\n      />\n    </div>\n  );\n};\n\nexport default SortByName;\n","import { useCallback, ChangeEvent } from 'react';\nimport InputWrapper from '../input-wrapper/input-wrapper';\nimport './sort-form.scss';\n\ninterface Props {\n  query: string;\n  onChangeQuery: (param: string) => void;\n}\n\nconst Search = (props: Props) => {\n  const changeHandler = useCallback(\n    (event: ChangeEvent<HTMLInputElement>) => {\n      props.onChangeQuery(event.target.value);\n    },\n    [props]\n  );\n\n  return (\n    <div className=\"sort-form__group\">\n      <InputWrapper\n        className=\"sort-form__input-wrapper\"\n        type=\"search\"\n        name=\"search-city\"\n        value={props.query}\n        id=\"search\"\n        label=\"Поиск городов\"\n        placeholder=\"Название города\"\n        onChange={changeHandler}\n      />\n    </div>\n  );\n};\n\nexport default Search;\n","const conditions = [\n  {\n    name: 'rainy',\n    desc: 'Дождливо',\n  },\n  {\n    name: 'sunny',\n    desc: 'Солнечно',\n  },\n  {\n    name: 'cloudy',\n    desc: 'Облачно',\n  },\n  {\n    name: 'snowy',\n    desc: 'Снежно',\n  },\n  {\n    name: 'stormy',\n    desc: 'Торнадо',\n  },\n  {\n    name: 'blizzard',\n    desc: 'Гроза',\n  },\n  {\n    name: 'metorite',\n    desc: 'Метеоритный дождь',\n  },\n];\n\nexport default conditions;\n","import { useCallback } from 'react';\nimport InputWrapper from '../input-wrapper/input-wrapper';\nimport conditions from './conditions';\nimport './sort-form.scss';\n\ninterface Props {\n  onChangeCondition: (param: string[]) => void;\n  conditions: string[];\n}\n\nconst SortByWeatherCondition = (props: Props) => {\n  const changeConditionQueryHandler = useCallback(\n    (event) => {\n      const condition = event.target.value;\n      const conditions = new Set(props.conditions);\n\n      if (conditions.has(condition)) {\n        conditions.delete(condition);\n      } else {\n        conditions.add(condition);\n      }\n\n      props.onChangeCondition(Array.from(conditions));\n    },\n    [props]\n  );\n\n  return (\n    <div className=\"sort-form__group\">\n      {conditions.map((item) => (\n        <InputWrapper\n          className=\"sort-form__input-wrapper\"\n          type=\"checkbox\"\n          key={item.name}\n          id={item.name}\n          name=\"weather-conditions\"\n          value={item.name}\n          label={item.desc}\n          iconName={item.name}\n          onChange={changeConditionQueryHandler}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default SortByWeatherCondition;\n","import classNames from 'classnames';\nimport SortByName from './sort-by-name';\nimport Search from './search';\nimport './sort-form.scss';\nimport SortByWeatherCondition from './sort-by-weather-condition';\nimport { SortType } from '../../types';\n\ninterface Props {\n  searchQuery: string;\n  className: string;\n  sortType: SortType;\n  conditions: string[];\n  onChangeSortType: (param: SortType) => void;\n  onChangeSearchQuery: (param: string) => void;\n  onChangeCondition: (param: string[]) => void;\n}\n\nconst SortForm = (props: Props) => {\n  return (\n    <section className={classNames('sort-form', props.className)}>\n      <h2 className=\"visually-hidden\">Форма сортировки</h2>\n      <form action=\"#\" method=\"GET\">\n        <SortByName\n          sortType={props.sortType}\n          onChangeSortType={props.onChangeSortType}\n        />\n        <Search\n          query={props.searchQuery}\n          onChangeQuery={props.onChangeSearchQuery}\n        />\n        <SortByWeatherCondition\n          onChangeCondition={props.onChangeCondition}\n          conditions={props.conditions}\n        />\n      </form>\n    </section>\n  );\n};\n\nexport default SortForm;\n","import { useState, useMemo } from 'react';\nimport Cards from '../cards/cards';\nimport SortForm from '../sort-form/sort-form';\nimport mockCities from '../cards/cardsData';\nimport { SortType, City } from '../../types';\nimport './weather-content.scss';\n\ninterface Props {\n  favourites: City[];\n  selectedCity: City | null;\n  desiredCity: City | null;\n  onChangeFavourites: (cities: City[]) => void;\n  onChangeSelectedCity: (city: City | null) => void;\n  onWantSelectCity: (city: City | null) => void;\n}\n\nconst WeatherContent = (props: Props) => {\n  const [sortType, setSortType] = useState<SortType>('asc');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [condition, setCondition] = useState<string[]>([]);\n\n  const filteredCities = useMemo(() => {\n    return mockCities.filter((item) => {\n      if (props.favourites.find((city) => city.id === item.id)) return false;\n      return item.name.toLowerCase().includes(searchQuery.toLowerCase());\n    });\n  }, [props.favourites, searchQuery]);\n\n  return (\n    <div className=\"weather-content\">\n      <SortForm\n        className=\"weather-content__sort\"\n        sortType={sortType}\n        searchQuery={searchQuery}\n        conditions={condition}\n        onChangeSortType={setSortType}\n        onChangeSearchQuery={setSearchQuery}\n        onChangeCondition={setCondition}\n      />\n      <Cards\n        cities={filteredCities}\n        conditions={condition}\n        favourites={props.favourites}\n        onChangeFavourites={props.onChangeFavourites}\n        onChangeSelectedCity={props.onChangeSelectedCity}\n        onWantSelectCity={props.onWantSelectCity}\n        sortType={sortType}\n        selectedCity={props.selectedCity}\n        desiredCity={props.desiredCity}\n      />\n    </div>\n  );\n};\n\nexport default WeatherContent;\n","import { useEffect, useState } from 'react';\nimport { MapProps } from './types';\nimport icon from '../icon/icons/marker_blue.png';\nimport iconHover from '../icon/icons/_blue.png';\nimport './weather-map.scss';\n\ninterface Props extends MapProps {\n  map: google.maps.Map;\n}\n\nconst WeatherMap = (props: Props) => {\n  const [, setMarkers] = useState<google.maps.Marker[]>([]);\n\n  useEffect(() => {\n    const newMarkers: google.maps.Marker[] = props.cities.map((city) => {\n      const marker = new google.maps.Marker({\n        position: { lat: city.lat, lng: city.lon },\n        map: props.map,\n      });\n      marker.addListener('mouseover', () => props.onWantSelectCity(city));\n      marker.addListener('mouseout', () => props.onWantSelectCity(null));\n\n      if (city.id === props.selectedCity?.id) {\n        marker.setIcon(icon);\n      }\n      if (city.id === props.desiredCity?.id) {\n        marker.setIcon(iconHover);\n      }\n\n      return marker;\n    });\n    setMarkers((current) => {\n      current.forEach((marker) => marker.setMap(null));\n      return newMarkers;\n    });\n  }, [props]);\n\n  useEffect(() => {\n    const lat = props.selectedCity?.lat || 59.97665957310762;\n    const lng = props.selectedCity?.lon || 30.42978408718145;\n    props.map?.setCenter({ lat, lng });\n    props.map.panBy(lat, lng);\n  }, [props.map, props.selectedCity]);\n\n  return null;\n};\n\nexport default WeatherMap;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAoCAYAAAD6xArmAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEWklEQVR4nK2XX2hbVRzHv9u9TXPt3Zb+cSZL3NDFWWecg8XQwdA9CFaf5tMG68tA9MEqioyKRdbabdL5sCEIZTgYA0XxocwHmbDRKpV1ozBnO6lrmtE2te2aZGlz07Rdburvd9KmTXNvmqZ+4cLN+Z3zOef+fr/zOyeyFgvBSOqZQTtiD49Bn3+DftZw06JJo6cbkuVXbNn+g9a4e9xovJwD/Hp6K0b/OoOU/g5sLisqdgLb7FCktD2hw4ap8VpEhmsRDX6pNox9C+e+Ru3DrdOmYLXlvhvTY+0E9EjP+jKwrD48otIunoTus+qB2/UYuXNYbXG8rX2+x58DVpv6XIiHO2h2l7rDbeie1RITP+eD9m+Fh76yQ22aP6g1eYIZsHrh0RNIRNvheNGlONzQFwriLk9AYxLJeRcmB9qJ9Zr2UflMesXj/e9CsXkV5/PrI66EP70Xiekxr2Dh4AWZZrBR5FvgPlQ0NKM9h4G7V1uIeVnG2L0jlDaqJEmYT22MywydWMyUKa2OonynaeeFx7NY+PMqMPgHoCcBxwvY9MoxbNrypPEAmxOU/0fZxzWcp6YB6/2FPu/n5d+BbixIFuDV98zBI3dqGKxis0HCsoJ3gfu/G7fz43o515ZmiXTP2X1Z0udz21J63iHMZOgsdbQamlMUzRIFmIlmt7Mr2GY0QbptlsF+2vselDtzO7n2AdOvA7e/z4bsOpC2GWlK1CS/TD7pxEzEGMyqJnByDujvIDhlhdMD7D9i3Jc1E2E/d8ooVb9DZKgejr3mnT1vpZ+VMvNzZAjMlLUv9nerJ3/rQeiBF1XPmMMLUegBT9jDzHRGlCgnMUHfyrXXLPXWEn/BRH+ahcVU0876OmnV1zDxTy2eKrIQjf3N8Gtaq68zAxYqVT9AKNBLq7aKFFuPHifYt7OCsagMWDt9wK9+erMVo72nRDqtR0M9nNutzMgBC9mrz9FJcBzhYTcqzQtTlsLDwJzmp5Pn3MrmLDBXfvUz5QSdBB1UmGTIlvzQJG33yYEkue4EjzUFC/hZX5fa0NVGwaiH86X8YA4Y0MZjVpuMC5Bia6aaWod4xIayCmNobJLrbhRllc1GZkMwnbQhCmQzHg6cxy6vMTgU4IA1c9+CwUL26osUyE+QmHJRGmXbElMcsCAF7KLZcFOwCGSDdIluPKdy6kh0lHfopdUBK2zFrFL1Cl1iGnP6xcNJKNuu5BuaF0zFJCAKVGyyBkuHJ68W4EITKBosJFl+hEbgpexg/3LbGlobvFm6Ttev5frL75Ll+obBlPx95I4gZYFLwFN6kCpY38ZXzOLjKx6py7wXoMLAwA3MxeoW3XHj/wOXKF3kivR7qZpTF4oCx/2D6MFPfi/eFJcLfo/7qYS4dxcPZmjfx+9jh8vOF7FubisbDYo2z/lv8sLzgkcutwloVZWd70vidLAhiaRVFrbq018VB3506yacNYeQDNLfiu1SeKndZlXRT7Z8+g+B1qknuwWABwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAoCAYAAAD6xArmAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADlElEQVR4nK2WbUhTURjH/9d7nS6vubSX2ZZhrBKzviRiEBQEpd/qk0F+CSIQrS8VUgYi9oIRJUIgUhBBUF+UoA8GigZCIoL0YhiOiTqb5jbm69S83p5zNpe6u7m3P9xxt3PO7zx7nuf+z5VUVYWWhLt9Rsz9uQxl5QJ9LaZL9g/N09ULUfcJ6XvfqY+LJrXWS0HARyM7MfHtIdaUazCYU5GZA2QYoRd9414FBsxMlsA9VgKP/bFQ6XgJ04ka9V7ubEiwUP3FgllHGwELxENFAdhGyWxFlpFfXqUoVbH1VWF84KxQPXlJbThlDQILtz+bseDqot3N8n6LZnq2im98uAjzvzML6F92EeOU+vSMPQAWHlh3wOtpQ/Yxsz7bAkU77aE3oDXe1RUzpofbiHVGvW9Z9EU8OXQdekOh3nQ0OuJG+IF8eGcdhZwFS6NEOxio8vWwnI4ZGtCRs8DXD/XEfC3BMXiR2kYWRREra/FxGUMhFmNK1FZl2JUTf7TrMphA/V/GclzM+jTagoUFjw8UM7CMJI2GjVU+Fm/3oKcvAZIYdInynJow5JrCPpcY2ErPfgF2mRIDnuGeZJUoJ91YdCcOvOhmee6WkCK/hXu0Ctn5iQG7R8GYkvrsXK9Q0doP50ghdufGB3WOsBz3M6avI5L1dzA11MW9N9bWY0WbGvKx4G81tam0m6Jux9SvEuyL0YgcPxm8XX1R2h0Ac6XIN+C0faeoU2nX6KB/vSy3S5zhVwCsNp63ClUfGzDxvRYHT0YHHu0nB9I1MEYQmMuY94ROgitwjVmQFaExucaA5XkrnTxPNv68CcycX7g5fJVOgi4yJgmSLjx0dQU0d5VSd5WtDQnm8KbSHqHyQzMVowqm4+HBrGBAM1uzdUjbgPSGOvLUciy4DUjL1IbOTTPf9SAtq05rWBNMJ62TClmHP8PPcbBQG+y0sYLVsbkRg7mMeS1UyFvwzpipjTaPeWdYwexUsJZQy0OCeSErB1/RG09tkI94JtgT+mprwSKLmClFfkMvMTVB8xZcq9BnvAm3NCyYzMTGDWpuuhjpe/5HCzCjscUM5hJ17zFP4PXuYPllv22j7cFJYge9fq0fOeD3oq4jbjA1/w9Kh526wMzha4qdHOxH/BEzseNrwV0euI9AkR79nVieK/enozNx4GR9D6XCd58iB/lCzGDu1RWtnvX7hIH96o1iblTgiCKNHpwkuqIB/wPnmlsEaY1c0wAAAABJRU5ErkJggg==\"","import { useEffect, useState } from 'react';\nimport { Loader } from '@googlemaps/js-api-loader';\nimport './weather-map.scss';\nimport { MapProps } from './types';\nimport WeatherMap from './weather-map';\n\nconst MapLoader = (props: MapProps) => {\n  const [map, setMap] = useState<google.maps.Map | null>(null);\n\n  useEffect(() => {\n    const loader = new Loader({\n      apiKey: `${process.env.REACT_APP_MAP_KEY}`,\n      version: 'weekly',\n    });\n\n    loader.load().then(() => {\n      setMap(\n        new google.maps.Map(document.getElementById('map') as HTMLElement, {\n          center: { lat: 59.97665957310762, lng: 30.42978408718145 },\n          zoom: 8,\n        })\n      );\n    });\n  }, []);\n\n  return (\n    <>\n      <div id=\"map\" />\n      {map && (\n        <WeatherMap\n          /* eslint-disable-next-line react/jsx-props-no-spreading */\n          {...props}\n          map={map}\n        />\n      )}\n    </>\n  );\n};\n\nexport default MapLoader;\n","import { useState, useCallback } from 'react';\nimport { City } from '../../types';\nimport WeatherContent from '../weather-content/weather-content';\nimport WeatherMap from '../weather-map';\n\nconst WeatherApp = () => {\n  const [favourites, setFavourites] = useState<City[]>(() => {\n    const cards = localStorage.getItem('favourites');\n    if (cards) return JSON.parse(cards);\n    return [];\n  });\n  const [selectedCity, setSelectedCity] = useState<City | null>(null);\n  const [desiredCity, setDesiredCity] = useState<City | null>(null);\n\n  const changeFavouritesHandler = useCallback((newFavouriteArray) => {\n    setFavourites(newFavouriteArray);\n    localStorage.setItem('favourites', JSON.stringify(newFavouriteArray));\n  }, []);\n\n  return (\n    <div className=\"weather-app\">\n      <WeatherContent\n        favourites={favourites}\n        selectedCity={selectedCity}\n        desiredCity={desiredCity}\n        onChangeFavourites={changeFavouritesHandler}\n        onChangeSelectedCity={setSelectedCity}\n        onWantSelectCity={setDesiredCity}\n      />\n      <WeatherMap\n        cities={favourites}\n        selectedCity={selectedCity}\n        desiredCity={desiredCity}\n        onChangeSelectedCity={setSelectedCity}\n        onWantSelectCity={setDesiredCity}\n      />\n    </div>\n  );\n};\n\nexport default WeatherApp;\n","import { StrictMode } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport WeatherApp from './components/weather-app/weather-app';\n\nReactDOM.render(\n  <StrictMode>\n    <WeatherApp />\n  </StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}